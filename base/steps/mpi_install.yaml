- mpi_version: "1.8"
- mpi_path: "/usr/local/"

- get_mpi:
  - exec_local: |
       cd /tmp/
       wget -q http://www.open-mpi.org/software/ompi/v$$mpi_version/downloads/openmpi-1.8.4.tar.gz
  - local2in:
      - /tmp/openmpi-1.8.4.tar.gz
      - /tmp/openmpi-1.8.4.tar.gz
- mpi_install:
  - exec_in: |
       cd /tmp/
       tar -xf openmpi-1.8.4.tar.gz
       cd openmpi-1.8.4
       ./configure --prefix=$$mpi_path
       make all install
- ld_config:
  - write_in:
      - /etc/ld.so.conf.d/libmpi.conf
      - |
        # openmpi conf
	/usr/lib/local/


- cleaning:
  - exec_in: rm -rf /tmp/openmpi-*
